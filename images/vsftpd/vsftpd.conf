# vsftpd configuration for containerized deployment
# Security-focused configuration

# Run in standalone mode
listen=YES
listen_ipv6=NO

# Disable anonymous FTP for security
anonymous_enable=NO

# Enable local users
local_enable=YES
write_enable=YES

# Chroot local users to their home directory for security
chroot_local_user=YES
allow_writeable_chroot=YES

# Security settings
# Hide IDs from user
hide_ids=YES

# Disable seccomp filter (can cause issues in containers)
seccomp_sandbox=NO

# Logging
xferlog_enable=YES
xferlog_std_format=YES
log_ftp_protocol=YES
syslog_enable=YES

# Connection limits and timeouts
max_clients=10
max_per_ip=3
idle_session_timeout=600
data_connection_timeout=120

# Passive mode configuration
pasv_enable=YES
pasv_min_port=21100
pasv_max_port=21110
pasv_address=
pasv_addr_resolve=NO

# Use local time
use_localtime=YES

# File permissions
local_umask=022
file_open_mode=0666

# Performance
use_sendfile=YES

# Security: Disable certain commands
# cmds_allowed=PASV,RETR,QUIT

# Port settings
listen_port=21
connect_from_port_20=NO
ftp_data_port=20

# SSL/TLS (disabled by default, can be enabled via environment)
ssl_enable=NO
# When enabled, these should be set:
# rsa_cert_file=/etc/ssl/certs/vsftpd.pem
# rsa_private_key_file=/etc/ssl/private/vsftpd.key
# allow_anon_ssl=NO
# force_local_data_ssl=YES
# force_local_logins_ssl=YES
# ssl_tlsv1=YES
# ssl_sslv2=NO
# ssl_sslv3=NO
# require_ssl_reuse=NO

# User list settings
userlist_enable=NO
userlist_deny=NO

# PAM service name
pam_service_name=vsftpd

# Reverse DNS lookups
reverse_lookup_enable=NO

# Background mode
background=NO
